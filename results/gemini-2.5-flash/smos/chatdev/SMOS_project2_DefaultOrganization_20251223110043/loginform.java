'''
This class represents the graphical user interface for the login form.
It includes fields for username and password, a login button, and handles the
login attempt logic, specifically demonstrating the "LoginError" use case
where authentication always fails as per the problem's precondition.
'''
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
public class LoginForm extends JFrame implements ActionListener {
    // GUI Components
    private JTextField usernameField; // Text field for entering username
    private JPasswordField passwordField; // Password field for entering password securely
    private JButton loginButton; // Button to trigger the login attempt
    private JLabel messageLabel; // Label to display messages to the user (e.g., error messages)
    /**
     * Constructor for the LoginForm.
     * Initializes the GUI components, sets up the layout, and adds event listeners.
     */
    public LoginForm() {
        // Set up the JFrame properties
        setTitle("Login Form"); // Title of the window
        setSize(400, 250); // Initial size of the window
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // Ensures the application exits when the window is closed
        setLocationRelativeTo(null); // Centers the window on the screen
        // Use a JPanel for better organization and layout management
        JPanel panel = new JPanel(new GridBagLayout());
        panel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20)); // Add padding
        // GridBagConstraints for layout management
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(5, 5, 5, 5); // Padding between components
        gbc.fill = GridBagConstraints.HORIZONTAL; // Components will fill their display area horizontally
        // --- Username Label and Field ---
        gbc.gridx = 0; // Column 0
        gbc.gridy = 0; // Row 0
        panel.add(new JLabel("Username:"), gbc); // Add username label
        usernameField = new JTextField(20); // 20 columns wide
        gbc.gridx = 1; // Column 1
        gbc.gridy = 0; // Row 0
        panel.add(usernameField, gbc); // Add username text field
        // --- Password Label and Field ---
        gbc.gridx = 0; // Column 0
        gbc.gridy = 1; // Row 1
        panel.add(new JLabel("Password:"), gbc); // Add password label
        passwordField = new JPasswordField(20); // 20 columns wide
        gbc.gridx = 1; // Column 1
        gbc.gridy = 1; // Row 1
        panel.add(passwordField, gbc); // Add password text field
        // --- Login Button ---
        loginButton = new JButton("Login"); // Create login button
        loginButton.addActionListener(this); // Register this class as the action listener for the button
        gbc.gridx = 0; // Column 0
        gbc.gridy = 2; // Row 2
        gbc.gridwidth = 2; // Span across two columns
        panel.add(loginButton, gbc); // Add login button
        // --- Message Label ---
        messageLabel = new JLabel(""); // Initialize message label (empty initially)
        messageLabel.setForeground(Color.RED); // Set text color to red for error messages
        messageLabel.setHorizontalAlignment(SwingConstants.CENTER); // Center align the text
        gbc.gridx = 0; // Column 0
        gbc.gridy = 3; // Row 3
        gbc.gridwidth = 2; // Span across two columns
        panel.add(messageLabel, gbc); // Add message label
        // Add the panel to the frame
        add(panel);
    }
    /**
     * This method is called when an action event occurs (e.g., button click).
     * It handles the login button click event.
     *
     * @param e The ActionEvent generated by the component.
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == loginButton) {
            String username = usernameField.getText(); // Get text from username field
            // Get password from password field (returns char array for security)
            char[] passwordChars = passwordField.getPassword();
            String password = new String(passwordChars); // Convert char array to String
            // Simulate authentication. As per the use case precondition ("The data provided for the login are incorrect"),
            // this authentication will always simulate failure to demonstrate the "LoginError" scenario.
            if (!authenticate(username, password)) {
                displayErrorMessage("Invalid username or password. Please try again.");
            } else {
                // This branch would typically handle successful login,
                // but for this specific use case, it's not expected to be reached.
                messageLabel.setText("Login Successful (This should not happen in LoginError scenario)");
                messageLabel.setForeground(Color.GREEN);
                // In a real application, you'd navigate to the main application window here.
            }
            // Clear the password field after every attempt for security reasons
            // It's essential to overwrite the char array with zeros for sensitive data management if not converted
            // to String. However, since it's converted to String here, and String is immutable, this is fine.
            // Clearing the JPasswordField text is sufficient for display.
            passwordField.setText(""); 
        }
    }
    /**
     * Simulates an authentication process.
     * For this "LoginError" use case, it is designed to always return false,
     * as the precondition states that incorrect authentication data is provided.
     *
     * @param username The username entered by the user.
     * @param password The password entered by the user.
     * @return Always returns false to simulate incorrect credentials.
     */
    private boolean authenticate(String username, String password) {
        // In a real application, this would check against a database or an authentication service.
        // For this specific "LoginError" use case, we simulate incorrect credentials
        // by always returning false, fulfilling the precondition "The data provided for the login are incorrect".
        // If we were to implement a successful login (e.g., for a different use case), it might look like:
        // if (username.equals("user") && password.equals("pass")) {
        //     return true;
        // } else {
        //     return false;
        // }
        // ...but for this particular task:
        return false; // Always return false to simulate incorrect authentication data
    }
    /**
     * Displays an error message to the user on the messageLabel.
     *
     * @param message The error message to display.
     */
    private void displayErrorMessage(String message) {
        messageLabel.setText(message); // Set the error message
        messageLabel.setForeground(Color.RED); // Ensure the message is red for errors
    }
}